<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Titan OS | Proxy Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client"></script>
    <style>
        :root { --n-red: #E50914; --n-black: #050505; }
        body { background: var(--n-black); color: white; font-family: sans-serif; overflow: hidden; height: 100vh; margin: 0; }
        
        #desktop { position: absolute; inset: 0; background: radial-gradient(circle, #1a1a1a, #000); z-index: 1; }
        
        /* Netflix Style UI */
        .hero { height: 60vh; display: flex; align-items: flex-end; padding: 0 5% 60px; background: linear-gradient(to top, var(--n-black), transparent), url('https://images.unsplash.com/photo-1533481006249-11ce1308a34d?auto=format&fit=crop&w=1200'); background-size: cover; }
        
        /* Dock Layout */
        #dock { 
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); 
            background: rgba(20,20,20,0.8); backdrop-filter: blur(25px); 
            border: 1px solid rgba(255,255,255,0.1); border-radius: 35px;
            padding: 12px 30px; display: flex; gap: 30px; z-index: 9999;
        }
        .dock-btn { font-size: 32px; color: #666; transition: 0.3s; cursor: pointer; }
        .dock-btn:hover { color: var(--n-red); transform: scale(1.2); }

        /* Proxy Overlay */
        #proxy-overlay { 
            position: fixed; inset: 0; background: var(--n-black); z-index: 10000; 
            display: none; flex-direction: column; align-items: center; justify-content: center;
        }
        .proxy-input-wrap { width: 90%; max-width: 600px; position: relative; }
        .proxy-input { 
            width: 100%; background: #111; border: 2px solid #333; padding: 20px 30px; 
            border-radius: 50px; color: white; outline: none; font-size: 18px; transition: 0.3s;
        }
        .proxy-input:focus { border-color: var(--n-red); box-shadow: 0 0 20px rgba(229, 9, 20, 0.3); }
        
        /* Card Row */
        .card-row { display: flex; overflow-x: auto; gap: 15px; padding: 20px 5%; scrollbar-width: none; }
        .card { min-width: 220px; aspect-ratio: 16/9; background: #181818; border-radius: 4px; flex-shrink: 0; cursor: pointer; transition: 0.3s; position: relative; }
        .card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }
    </style>
</head>
<body>

    <div id="desktop">
        <nav class="fixed top-0 w-full p-6 flex items-center z-50 bg-gradient-to-b from-black to-transparent">
            <h1 class="text-4xl font-black italic text-[#E50914] tracking-tighter">TITAN</h1>
        </nav>

        <div id="main-content" class="overflow-y-auto h-full">
            <div class="hero">
                <div class="max-w-xl">
                    <h2 class="text-6xl font-black mb-4 uppercase">Web Unblocker</h2>
                    <p class="text-lg opacity-70 mb-6">Experience the internet without boundaries. Powered by Titan Proxy Engine.</p>
                    <button onclick="UI.toggleProxy()" class="bg-white text-black px-10 py-4 rounded font-black flex items-center gap-2">
                        <i class="material-icons-round">public</i> OPEN BROWSER
                    </button>
                </div>
            </div>

            <div class="mt-8 px-[5%] text-xl font-bold">Your Media</div>
            <div id="media-row" class="card-row">
                </div>
        </div>
    </div>

    <div id="proxy-overlay">
        <i class="material-icons-round absolute top-10 right-10 text-4xl cursor-pointer opacity-50 hover:opacity-100" onclick="UI.toggleProxy()">close</i>
        <div class="text-center mb-10">
            <h2 class="text-4xl font-black text-[#E50914] mb-2">TITAN PROXY</h2>
            <p class="opacity-50">Enter a URL below to browse securely via redirect.</p>
        </div>
        <div class="proxy-input-wrap">
            <input id="target-url" type="text" class="proxy-input" placeholder="Search or type a URL..." onkeydown="if(event.key==='Enter') UI.launchProxy()">
            <button onclick="UI.launchProxy()" class="absolute right-4 top-4 bg-[#E50914] p-2 rounded-full">
                <i class="material-icons-round">arrow_forward</i>
            </button>
        </div>
        <div class="mt-10 flex gap-6 opacity-30">
            <i class="material-icons-round text-5xl">google</i>
            <i class="material-icons-round text-5xl">youtube</i>
            <i class="material-icons-round text-5xl">discord</i>
        </div>
    </div>

    <div id="dock">
        <i class="material-icons-round dock-btn" style="color:var(--n-red)" onclick="location.reload()">home</i>
        <i class="material-icons-round dock-btn" onclick="UI.toggleProxy()">public</i>
        <i class="material-icons-round dock-btn" onclick="UI.openSettings()">settings</i>
    </div>

    <script>
        const UI = {
            // Configuration
            apiKey: 'AIzaSyDQmlHngYNWqAbveDkUCiuIdgN1ZnnZ2ng',
            playlist: JSON.parse(localStorage.getItem('t_list') || '[]'),

            init() {
                this.renderMedia();
            },

            toggleProxy() {
                const ov = document.getElementById('proxy-overlay');
                ov.style.display = (ov.style.display === 'flex') ? 'none' : 'flex';
            },

            launchProxy() {
                const query = document.getElementById('target-url').value;
                if (!query) return;

                let url = query;
                if (!url.includes('.')) {
                    url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                } else if (!url.startsWith('http')) {
                    url = `https://${url}`;
                }

                // Proxy Gateway Selection
                // Since iFrames are blocked, we use a redirect-based proxy engine
                // Encodes the URL and passes it to a web-worker proxy
                const proxyEngine = "https://r.jina.ai/"; // High-speed clean renderer
                window.open(proxyEngine + url, '_blank');
            },

            renderMedia() {
                const row = document.getElementById('media-row');
                if (this.playlist.length === 0) {
                    row.innerHTML = `<div class="opacity-20 italic">No media mounted. Link your Drive in Settings.</div>`;
                    return;
                }
                row.innerHTML = this.playlist.map((ep, i) => `
                    <div class="card" onclick="UI.play(${i})">
                        <img src="https://picsum.photos/seed/${ep.id}/400/225">
                        <div class="absolute bottom-2 left-2 text-[10px] font-bold truncate w-full">${ep.name}</div>
                    </div>
                `).join('');
            },

            openSettings() {
                alert("Settings Logic from Repository Active. Syncing Drive...");
            }
        };

        window.onload = () => UI.init();
    </script>
</body>
</html>
