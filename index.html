
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenith OS | Starship</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        :root {
            --accent: #8a2be2;
            --neon: #ae54ff;
        }
        body {
            margin: 0;
            background: radial-gradient(circle at top left, #120032 0%, #050505 90%);
            height: 100vh;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            color: #fff;
        }

        /* Desktop Area */
        #desktop { position: absolute; inset: 0; z-index: 1; }

        /* Window System */
        .window {
            position: absolute;
            background: #0d0d14;
            border: 1px solid rgba(138, 43, 226, 0.3);
            border-radius: 12px;
            display: flex; flex-direction: column;
            box-shadow: 0 10px 50px rgba(0,0,0,0.8);
            overflow: hidden; z-index: 10;
        }
        .win-bar {
            height: 38px; background: linear-gradient(90deg, #1a0033, #0d0d14);
            display: flex; align-items: center; padding: 0 15px; cursor: grab;
        }
        .win-title { font-size: 11px; font-weight: 800; color: var(--neon); flex-grow: 1; text-transform: uppercase; }
        .win-content { flex-grow: 1; background: #000; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }

        /* The Dock */
        #dock {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(18, 0, 50, 0.6); backdrop-filter: blur(20px);
            border: 1px solid rgba(174, 84, 255, 0.2);
            padding: 10px 20px; border-radius: 25px; display: flex; gap: 15px; z-index: 9999;
        }
        .dock-item {
            width: 48px; height: 48px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s;
        }
        .dock-item:hover { transform: translateY(-10px); }
        .dock-item i { font-size: 28px; color: #fff; }

        /* Panic Shield */
        #panic { position: fixed; inset: 0; background: #fff; z-index: 100000; display: none; }
    </style>
</head>
<body onload="OS.boot()">

    <div id="panic"><iframe src="https://classroom.google.com" style="width:100%; height:100%;"></iframe></div>
    <div id="desktop"></div>

    <div id="dock">
        <div class="dock-item" onclick="OS.open('home')"><i class="material-icons-round">rocket_launch</i></div>
        <div class="dock-item" onclick="OS.open('tv')"><i class="material-icons-round">live_tv</i></div>
        <div class="dock-item" onclick="OS.open('ai')"><i class="material-icons-round">psychology</i></div>
        <div class="dock-item" onclick="OS.open('profile')"><i class="material-icons-round">account_circle</i></div>
        <div style="width:1px; height:30px; background:rgba(255,255,255,0.1); align-self:center;"></div>
        <div class="dock-item" onclick="OS.authDrive()"><i class="material-icons-round" style="color:#4285F4">cloud_done</i></div>
    </div>

    <script src="https://accounts.google.com/gsi/client"></script>
    <script>
        const OS = {
            z: 100,
            DRIVE_ACCESS_TOKEN: null,
            CONFIG: {
                clientId: '106130595767-2ai0d8mac2ard8q2ngthuuh5pahoutuv.apps.googleusercontent.com',
                scopes: 'https://www.googleapis.com/auth/drive.file'
            },

            apps: {
                'home': { title: 'Dashboard', url: 'start.html', w: 900, h: 600 },
                'tv': { title: 'Star TV', url: 'tv.html', w: 1000, h: 700 },
                'profile': { title: 'Profile', url: 'profile.html', w: 600, h: 750 },
                'ai': { title: 'Orbit AI', url: 'ai.html', w: 500, h: 700 }
            },

            boot() {
                this.open('home');
                window.addEventListener('keydown', e => { if(e.key === '`') document.getElementById('panic').style.display='block'; });
                
                // Initialize Google Auth
                this.tokenClient = google.accounts.oauth2.initTokenClient({
                    client_id: this.CONFIG.clientId,
                    scope: this.CONFIG.scopes,
                    callback: (tokenResponse) => {
                        this.DRIVE_ACCESS_TOKEN = tokenResponse.access_token;
                        alert("Starship connected to Google Drive.");
                    },
                });
            },

            authDrive() {
                this.tokenClient.requestAccessToken({prompt: 'consent'});
            },

            open(id) {
                const app = this.apps[id];
                const win = document.createElement('div');
                win.className = 'window';
                win.style.width = app.w + 'px'; win.style.height = app.h + 'px';
                win.style.top = '10%'; win.style.left = '15%';
                win.style.zIndex = ++this.z;

                win.innerHTML = `
                    <div class="win-bar">
                        <div class="win-title">${app.title}</div>
                        <div style="display:flex; gap:8px;">
                            <div style="width:12px; height:12px; border-radius:50%; background:#ffbd2e; cursor:pointer;"></div>
                            <div onclick="this.closest('.window').remove()" style="width:12px; height:12px; border-radius:50%; background:#ff5f56; cursor:pointer;"></div>
                        </div>
                    </div>
                    <div class="win-content"><iframe src="${app.url}"></iframe></div>
                `;
                
                win.onmousedown = () => win.style.zIndex = ++this.z;
                this.drag(win);
                document.getElementById('desktop').appendChild(win);
            },

            drag(el) {
                const bar = el.querySelector('.win-bar');
                let x=0, y=0, x1=0, y1=0;
                bar.onmousedown = (e) => {
                    x1=e.clientX; y1=e.clientY;
                    document.onmouseup = () => { document.onmousemove = null; };
                    document.onmousemove = (e) => {
                        x=x1-e.clientX; y=y1-e.clientY;
                        x1=e.clientX; y1=e.clientY;
                        el.style.top = (el.offsetTop - y) + "px";
                        el.style.left = (el.offsetLeft - x) + "px";
                    };
                };
            }
        };
    </script>
</body>
</html>
