<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenith OS | Starship Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        :root { --accent: #8a2be2; --neon: #ae54ff; --bg: #050505; }
        body, html { margin: 0; padding: 0; height: 100vh; overflow: hidden; background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; }

        /* Space Background Overlay */
        #desktop { 
            position: absolute; inset: 0; z-index: 1; 
            background: radial-gradient(circle at 50% 50%, #1a0033 0%, #050505 100%);
        }

        /* Initial Boot Terminal */
        #boot-screen {
            position: fixed; inset: 0; background: #000; z-index: 99999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            font-family: 'Courier New', monospace; color: var(--neon);
        }

        /* Glassmorphic Window System */
        .window {
            position: absolute; background: rgba(13, 13, 20, 0.85);
            backdrop-filter: blur(20px); border: 1px solid rgba(138, 43, 226, 0.3);
            border-radius: 18px; display: flex; flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7); overflow: hidden;
        }
        .win-bar {
            height: 45px; background: rgba(255, 255, 255, 0.03);
            display: flex; align-items: center; padding: 0 15px; cursor: grab;
        }
        .win-title { font-size: 10px; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; flex-grow: 1; color: var(--neon); }
        .win-dot { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; margin-left: 8px; transition: 0.3s; }

        /* The Dock */
        #dock {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 30px;
            padding: 12px 25px; display: flex; gap: 20px; z-index: 9999;
        }
        .dock-item {
            width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); border-radius: 15px;
        }
        .dock-item:hover { transform: translateY(-15px) scale(1.2); background: rgba(138, 43, 226, 0.2); }
        .dock-item i { font-size: 28px; }

        /* Notifications */
        #notif-box { position: fixed; top: 20px; right: 20px; z-index: 100000; display: flex; flex-direction: column; gap: 10px; }
        .notif { background: rgba(138, 43, 226, 0.9); padding: 12px 20px; border-radius: 10px; font-size: 12px; animation: slideIn 0.3s ease-out; border-left: 4px solid #fff; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

        #panic { position: fixed; inset: 0; background: white; z-index: 1000000; display: none; }
    </style>
</head>
<body onload="Kernel.boot()">

    <div id="boot-screen">
        <div id="boot-text" style="width: 350px;"></div>
        <div style="width: 200px; height: 2px; background: #222; margin-top: 20px; position: relative; overflow: hidden;">
            <div id="boot-bar" style="position: absolute; width: 0%; height: 100%; background: var(--neon); transition: 0.5s;"></div>
        </div>
    </div>

    <div id="panic"><iframe src="https://classroom.google.com" class="w-full h-full"></iframe></div>
    <div id="notif-box"></div>
    <div id="desktop"></div>

    <div id="dock">
        <div class="dock-item" onclick="Kernel.open('home')" title="Dashboard"><i class="material-icons-round">rocket_launch</i></div>
        <div class="dock-item" onclick="Kernel.open('ai')" title="Orbit AI"><i class="material-icons-round" style="color: #ae54ff;">psychology</i></div>
        <div class="dock-item" onclick="Kernel.open('tv')" title="Cinema TV"><i class="material-icons-round">movie</i></div>
        <div class="dock-item" onclick="Kernel.open('profile')" title="Pilot Profile"><i class="material-icons-round">account_circle</i></div>
        <div style="width:1px; height:30px; background:rgba(255,255,255,0.1); align-self:center;"></div>
        <div class="dock-item" onclick="Kernel.authDrive()" title="Link Google Drive"><i class="material-icons-round" style="color:#4285F4">cloud_sync</i></div>
    </div>

    <script src="https://accounts.google.com/gsi/client"></script>
    <script>
        const Kernel = {
            z: 100,
            DRIVE_ACCESS_TOKEN: null,
            // YOUR CREDENTIALS
            CLIENT_ID: '106130595767-hlvoakq65984eu1fc9mq0h3951oll8qs.apps.googleusercontent.com',
            API_KEY: 'AIzaSyDQmlHngYNWqAbveDkUCiuIdgN1ZnnZ2ng',

            apps: {
                'home': { title: 'Navigation Central', url: 'start.html', w: 900, h: 600 },
                'ai': { title: 'Orbit Neural Terminal', url: 'ai.html', w: 550, h: 750 },
                'tv': { title: 'Starship Cinema', url: 'tv.html', w: 1050, h: 650 },
                'profile': { title: 'Pilot Data', url: 'profile.html', w: 500, h: 700 }
            },

            async boot() {
                const lines = ["AUTHENTICATING STARSHIP...", "MOUNTING CLOUD DRIVES...", "SYNCING ORBIT AI...", "SYSTEM READY."];
                const text = document.getElementById('boot-text');
                const bar = document.getElementById('boot-bar');

                for(let i=0; i<lines.length; i++){
                    text.innerHTML += `<div style="margin-bottom:5px;">> ${lines[i]}</div>`;
                    bar.style.width = (i+1)*25 + "%";
                    await new Promise(r => setTimeout(r, 600));
                }

                document.getElementById('boot-screen').style.transition = '1s';
                document.getElementById('boot-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('boot-screen').style.display = 'none';
                    this.open('home');
                    this.notify("Welcome Back, Pilot.");
                }, 1000);

                // Initialize Google Auth
                this.tokenClient = google.accounts.oauth2.initTokenClient({
                    client_id: this.CLIENT_ID,
                    scope: 'https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.readonly',
                    callback: (res) => {
                        this.DRIVE_ACCESS_TOKEN = res.access_token;
                        this.notify("Cloud Connection Active");
                    },
                });

                window.addEventListener('keydown', e => { if(e.key === '`') document.getElementById('panic').style.display = 'block'; });
            },

            notify(msg) {
                const box = document.getElementById('notif-box');
                const n = document.createElement('div');
                n.className = 'notif';
                n.innerText = msg;
                box.appendChild(n);
                setTimeout(() => n.remove(), 4000);
            },

            authDrive() { this.tokenClient.requestAccessToken({prompt: 'consent'}); },

            open(id) {
                const app = this.apps[id];
                const win = document.createElement('div');
                win.className = 'window';
                win.style.width = app.w + 'px'; win.style.height = app.h + 'px';
                win.style.top = '80px'; win.style.left = '100px';
                win.style.zIndex = ++this.z;

                win.innerHTML = `
                    <div class="win-bar">
                        <div class="win-title">${app.title}</div>
                        <div class="win-dot" style="background:#ffbd2e;" onclick="Kernel.maximize(this)"></div>
                        <div class="win-dot" style="background:#ff5f56;" onclick="this.closest('.window').remove()"></div>
                    </div>
                    <div style="flex-grow:1;"><iframe src="${app.url}" class="w-full h-full border-none"></iframe></div>
                `;
                
                win.onmousedown = () => win.style.zIndex = ++this.z;
                this.drag(win);
                document.getElementById('desktop').appendChild(win);
            },

            maximize(btn) {
                const w = btn.closest('.window');
                w.style.top = '0'; w.style.left = '0';
                w.style.width = '100vw'; w.style.height = 'calc(100vh - 85px)';
            },

            drag(el) {
                const bar = el.querySelector('.win-bar');
                let x=0, y=0, x1=0, y1=0;
                bar.onmousedown = (e) => {
                    x1=e.clientX; y1=e.clientY;
                    document.onmouseup = () => { document.onmousemove = null; };
                    document.onmousemove = (e) => {
                        x=x1-e.clientX; y=y1-e.clientY;
                        x1=e.clientX; y1=e.clientY;
                        el.style.top = (el.offsetTop - y) + "px";
                        el.style.left = (el.offsetLeft - x) + "px";
                    };
                };
            }
        };
    </script>
</body>
</html>
