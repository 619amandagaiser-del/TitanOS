<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TITAN OS | SEEK_v27</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        :root { --p1: #00f2ff; --bg: #010105; }
        body { background: var(--bg); color: white; margin: 0; overflow: hidden; font-family: 'Space Grotesk', sans-serif; cursor: crosshair; }
        
        /* FOG OVERLAY */
        #fog-canvas { position: fixed; inset: 0; z-index: 5; mix-blend-mode: multiply; pointer-events: none; }

        /* THE SEEKER RADAR */
        .sonar-ring {
            position: fixed; border: 2px solid var(--p1); border-radius: 50%;
            pointer-events: none; z-index: 4; transform: translate(-50%, -50%);
            animation: expand 2s ease-out forwards;
        }
        @keyframes expand { from { width: 0; height: 0; opacity: 1; } to { width: 1000px; height: 1000px; opacity: 0; } }

        /* HIDDEN OBJECTS */
        .artifact { 
            position: absolute; width: 40px; height: 40px; border-radius: 50%;
            background: var(--p1); filter: blur(20px); opacity: 0; 
            transition: opacity 0.5s; z-index: 3;
        }

        .win { 
            position: absolute; background: rgba(10, 10, 20, 0.9); border: 1px solid var(--p1);
            backdrop-filter: blur(20px); border-radius: 20px; display: none; flex-direction: column; z-index: 10;
        }
        .win.active { display: flex; }
        
        #hud { position: fixed; top: 20px; left: 20px; z-index: 100; font-size: 12px; letter-spacing: 2px; color: var(--p1); }
    </style>
</head>
<body onclick="Seeker.ping(event)">

    <canvas id="fog-canvas"></canvas>
    <div id="hud">SEEKER_STATUS: SCANNING... [Found: <span id="count">0</span>/5]</div>

    <div id="win-compass" class="win active" style="width: 250px; height: 250px; top: 50px; left: 70%;">
        <div class="p-6 flex flex-col items-center justify-center h-full">
            <div id="needle" class="w-1 h-20 bg-cyan-400 rounded-full transition-transform duration-500"></div>
            <p class="mt-4 text-[10px] uppercase opacity-50">Artifact Proximity</p>
        </div>
    </div>

    <script>
        const Seeker = {
            found: 0,
            artifacts: [],
            init() {
                // Generate 5 hidden points
                for(let i=0; i<5; i++) {
                    const a = document.createElement('div');
                    a.className = 'artifact';
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    a.style.left = x + 'px';
                    a.style.top = y + 'px';
                    a.dataset.x = x; a.dataset.y = y;
                    document.body.appendChild(a);
                    this.artifacts.push(a);
                }
                this.setupFog();
            },
            setupFog() {
                const c = document.getElementById('fog-canvas');
                const ctx = c.getContext('2d');
                c.width = window.innerWidth; c.height = window.innerHeight;
                ctx.fillStyle = '#050510';
                ctx.fillRect(0,0,c.width, c.height);
            },
            ping(e) {
                // Visual Sonar
                const ring = document.createElement('div');
                ring.className = 'sonar-ring';
                ring.style.left = e.clientX + 'px';
                ring.style.top = e.clientY + 'px';
                document.body.appendChild(ring);
                setTimeout(() => ring.remove(), 2000);

                // Check distance to artifacts
                let closest = 10000;
                this.artifacts.forEach(a => {
                    const d = dist(e.clientX, e.clientY, a.dataset.x, a.dataset.y);
                    if(d < closest) closest = d;
                    if(d < 100) {
                        a.style.opacity = '1';
                        if(!a.classList.contains('found')) {
                            a.classList.add('found');
                            this.found++;
                            document.getElementById('count').innerText = this.found;
                            this.playNote(800);
                        }
                    }
                });

                // Update Compass
                const angle = Math.atan2(this.artifacts[0].dataset.y - e.clientY, this.artifacts[0].dataset.x - e.clientX);
                document.getElementById('needle').style.transform = `rotate(${angle + 1.5}rad)`;
                
                this.playNote(200 + (1000 - closest));
            },
            playNote(f) {
                if(!this.audioCtx) this.audioCtx = new AudioContext();
                const osc = this.audioCtx.createOscillator();
                const gain = this.audioCtx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(f, this.audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, this.audioCtx.currentTime + 0.5);
                osc.connect(gain).connect(this.audioCtx.audioWorklet ? this.audioCtx.destination : this.audioCtx.destination);
                osc.connect(gain).connect(this.audioCtx.destination);
                osc.start(); osc.stop(this.audioCtx.currentTime + 0.5);
            }
        };

        function dist(x1, y1, x2, y2) { return Math.sqrt((x2-x1)**2 + (y2-y1)**2); }
        window.onload = () => Seeker.init();
    </script>
</body>
</html>
